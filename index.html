<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 50 Questions Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .question-container {
            display: none;
            margin-bottom: 20px;
        }
        .question-container.active {
            display: block;
        }
        .wrong {
            color: red;
        }
        .correct-answer {
            color: green;
        }
        .feedback {
            font-weight: bold;
            margin-top: 10px;
        }
        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Top 50 Questions Quiz</h1>

    <div id="quiz"></div>
    
    <!-- Final Message -->
    <div class="question-container" id="finish" style="display: none;">
        <h2>Congratulations, you have completed the quiz!</h2>
        <p>Your Score: <span id="score"></span> out of 15</p>
        <div id="results"></div>
    </div>

    <script>
        const totalQuestions = 50; // 50 possible questions
        const displayedQuestions = 15; // Select 15 questions
        let score = 0;
        let currentQuestionIndex = 0;
        let randomQuestions = [];
        let userAnswers = {};

        // A pool of more varied wrong answers (longer and sometimes more complex)
        const allQuestions = [
            { 
                question: "What is flexible packaging?", 
                answers: { 
                    A: "A type of packaging made from hard materials.", 
                    B: "Flexible packaging is made from pliable materials that can easily change shape.", 
                    C: "A packaging that cannot be recycled.", 
                    D: "Packaging made from materials that can shrink, expand, and change shape with exposure to different elements like temperature or pressure." 
                }, 
                correctAnswer: 'B' 
            },
            { 
                question: "What is the difference between flexible and rigid packaging?", 
                answers: { 
                    A: "Flexible packaging is made from pliable materials, rigid packaging retains its shape.", 
                    B: "Both are made from plastic materials, but flexible ones can also be made from metals or combinations of synthetic and organic materials.", 
                    C: "Flexible packaging is only used for liquids, and rigid packaging for solids.", 
                    D: "There is no significant difference, both perform the same function."
                }, 
                correctAnswer: 'A' 
            },
            { 
                question: "Why is flexible packaging used in the food industry?", 
                answers: { 
                    A: "It’s expensive but lightweight, which offsets the cost of shipping.", 
                    B: "It extends shelf life by providing a barrier against moisture, light, and oxygen, and is widely adaptable for different food categories.", 
                    C: "It’s only used for frozen foods because it doesn't interact with other types of food.", 
                    D: "It's used mainly for advertising, as it provides extra space for colorful logos and text."
                }, 
                correctAnswer: 'B' 
            },
            { 
                question: "What materials are commonly used in flexible food packaging?", 
                answers: { 
                    A: "Polyethylene (PE), polypropylene (PP), polyester (PET), nylon, and foil.", 
                    B: "Only paper and plastic, typically in single-layer configurations.", 
                    C: "Glass and metal, because they create stronger barriers.", 
                    D: "All materials that can withstand high pressure, including fabrics and organic materials like cotton."
                }, 
                correctAnswer: 'A' 
            },
            { 
                question: "How does flexible packaging improve food shelf life?", 
                answers: { 
                    A: "By changing the product composition during processing.", 
                    B: "By including barrier layers that protect food from oxygen, moisture, and contaminants, without impacting the taste or nutritional value.", 
                    C: "By adding preservatives into the packaging that are released over time.", 
                    D: "By using vacuum seals that slow the movement of molecules inside the packaging."
                }, 
                correctAnswer: 'B' 
            },
            // More questions with varied wrong answers...
            // Add the remaining 45 questions with wrong answers creatively improved in a similar way
        ];

        // Randomly select 15 questions
        function selectRandomQuestions() {
            let shuffledQuestions = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffledQuestions.slice(0, displayedQuestions);
        }

        // Shuffle answer choices
        function shuffleAnswers(answers) {
            const keys = Object.keys(answers);
            const shuffledKeys = keys.sort(() => 0.5 - Math.random());
            const shuffledAnswers = {};
            shuffledKeys.forEach(key => {
                shuffledAnswers[key] = answers[key];
            });
            return shuffledAnswers;
        }

        // Display the current question
        function displayQuestion() {
            const quizDiv = document.getElementById("quiz");
            quizDiv.innerHTML = ''; // Clear previous question content
            if (currentQuestionIndex < randomQuestions.length) {
                const questionObj = randomQuestions[currentQuestionIndex];
                const shuffledAnswers = shuffleAnswers(questionObj.answers);
                quizDiv.innerHTML = `
                    <div class="question-container active" id="question-${currentQuestionIndex + 1}">
                        <p>${currentQuestionIndex + 1}. ${questionObj.question}</p>
                        ${Object.keys(shuffledAnswers).map(letter => `
                            <input type="radio" name="q${currentQuestionIndex + 1}" value="${letter}"> ${shuffledAnswers[letter]}<br>
                        `).join('')}
                        <button onclick="submitAnswer(${currentQuestionIndex + 1}, '${questionObj.correctAnswer}')">Submit Answer</button>
                        <div id="feedback-${currentQuestionIndex + 1}" class="feedback"></div>
                        <button id="continue-${currentQuestionIndex + 1}" style="display:none;" onclick="continueToNextQuestion(${currentQuestionIndex + 1})">Continue</button>
                    </div>
                `;
            } else {
                showResults();
            }
        }

        function submitAnswer(questionNumber, correctAnswer) {
            const selected = document.querySelector(`input[name="q${questionNumber}"]:checked`);
            const feedbackDiv = document.getElementById(`feedback-${questionNumber}`);
            const continueButton = document.getElementById(`continue-${questionNumber}`);

            if (!selected) {
                alert("Please select an answer!");
                return;
            }

            const userAnswer = selected.value;
            userAnswers[questionNumber] = userAnswer;

            if (userAnswer === correctAnswer) {
                score++;
                feedbackDiv.innerHTML = '<span class="correct-answer">Correct!</span>';
                setTimeout(() => nextQuestion(), 2000); // Move to the next question after 2 seconds
            } else {
                feedbackDiv.innerHTML = `<span class="wrong">Wrong! The correct answer was "${correctAnswer}".</span>`;
                continueButton.style.display = "inline"; // Show the "Continue" button for incorrect answers
            }
        }

        function continueToNextQuestion(questionNumber) {
            document.getElementById(`continue-${questionNumber}`).style.display = "none"; // Hide the continue button
            nextQuestion();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
        }

        function showResults() {
            document.getElementById("quiz").style.display = "none";
            document.getElementById("finish").style.display = "block";
            document.getElementById("score").innerText = score;

            let resultsHTML = "<h3>Review Your Answers:</h3>";
            randomQuestions.forEach((questionObj, index) => {
                const userAnswer = userAnswers[index + 1];
                const correctAnswer = questionObj.correctAnswer;
                if (userAnswer !== correctAnswer) {
                    resultsHTML += `<p class="wrong">Question ${index + 1}: You answered "${userAnswer}", the correct answer was "${correctAnswer}".</p>`;
                } else {
                    resultsHTML += `<p>Question ${index + 1}: Correct!</p>`;
                }
            });

            document.getElementById("results").innerHTML = resultsHTML;
        }

        // Initialize the quiz by selecting random questions and displaying the first one
        randomQuestions = selectRandomQuestions();
        displayQuestion();
    </script>
</body>
</html>
